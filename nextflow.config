// Working on the cluster
process {
    executor = 'slurm'
}

// Enable conda environments
conda.enabled = true

//Set-up the workdir location 
workDir = "/hpc/temp/meshinchi_s/Nextflow_Working"

apptainer {
    enabled = true
    autoMounts = true
    cacheDir = '/hpc/temp/meshinchi_s/Nextflow_Working'
    runOptions = '--containall -B \$TMPDIR -W \$TMPDIR'
}

//From STAR-Fusion, EXITING because of fatal ERROR: not enough memory for BAM sorting.
//The exit status of the task that caused the workflow execution to fail was: 102
process {
  maxRetries = 3
  withLabel: star_increasing_mem {
       errorStrategy = 'retry'
       memory = {64.GB * task.attempt}
       cpus = {8 * task.attempt}
       maxRetries = 2
  }
}
